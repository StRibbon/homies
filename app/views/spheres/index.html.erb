<%= render "navbar" %>

<ul>
<% @spheres.each do |sphere| %>
<li>
<%= link_to sphere.name, user_sphere_expenses_path(sphere_id: sphere.id) %>
<strong>Description:</strong> <%= sphere.description %>
<%= total_expense_amount_sphere(sphere)%>
<%= link_to "Edit", edit_user_sphere_path(id: sphere.id) %>
<%= link_to 'Destroy', user_sphere_path(id: sphere.id), method: :delete, data: { confirm: 'Are you sure?' } %>
</li>
<% end %>
</ul>

<div id="chartContainer" style="height: 300px; width: 100%;">
</div>
<script type="text/javascript">
  window.onload = function () {

    CanvasJS.addColorSet("grayShades",
    [
      "#E1E2E3",
      "#B5B7BA",
      "#6E7072",
      "#444446"
    ]);

    var chart = new CanvasJS.Chart("chartContainer",
    {
      colorSet: "grayShades",
      backgroundColor: null,
      axisX:{
          gridThickness:0,
          lineThickness:0,
          tickLength:0,
          labelFontColor: "#EEEFF0"
      },
      axisY:{
          gridThickness:0,
          lineThickness:0,
          tickLength:0,
          labelFontColor: "#EEEFF0"
      },

       data: [
           {
           type: "stackedBar",
           click: onClick,
           dataPoints: [
             <% @spheres.each do |sphere| %>
                 { label: "<%= sphere.name %>", y: <%= total_expense_amount_sphere(sphere)%> },
             <% end %>
           ]
         },
       ]
    });

function onClick(e) {alert(e.dataPoint.y + " " + e.dataPoint.x)}
chart.render();
}
</script>
<%= render "footer" %>
